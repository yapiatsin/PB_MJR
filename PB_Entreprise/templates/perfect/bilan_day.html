
{% load static %} 
{% if user.is_authenticated %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link href="{% static 'icn.png' %}" rel="icon">
    <title>
        {% block title %} P&BENTREPRISE {% endblock title %}
    </title>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="{% static 'pb/plugins/fontawesome-free/css/all.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'pb/plugins/overlayScrollbars/css/OverlayScrollbars.min.css' %} ">
    <!-- Google Font: Source Sans Pro -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- DataTables -->
    <link rel="stylesheet" href="{% static 'pb/plugins/datatables-bs4/css/dataTables.bootstrap4.css' %}">
    <!-- jsGrid -->
    <link rel="stylesheet" href="{% static 'pb/plugins/jsgrid/jsgrid.min.css' %}">
    <link rel="stylesheet" href="{% static 'pb/plugins/jsgrid/jsgrid-theme.min.css' %}">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- SweetAlert2 -->
    <link rel="stylesheet" href="{% static 'pb/plugins/sweetalert2-theme-bootstrap-4/bootstrap-4.min.css' %}">
    <!-- Toastr -->
    <link rel="stylesheet" href="{% static 'pb/plugins/toastr/toastr.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'pb/dists/css/adminlte.min.css' %}">
    <style>
        .content-wrapper {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.123), rgba(221, 221, 221, 0.197));
            background-size: 200% 200%;
            animation: iceEffect 10s ease infinite;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            padding: 2px;
        }
        /* Animation pour l'effet de glace */
        
        @keyframes iceEffect {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th,
        td {
            border: 1px solid #ddd;
            padding: 5px;
            text-align: center;
        }
        
        th {
            background-color: #f2f2f2;
        }
        
    </style>

</head>

<body class="hold-transition layout-top-nav">
    <div class="wrapper">
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand-md navbar-light navbar-white">
            <div class="container-fluid">
                <a href="{% url 'dash' %}" class="brand-link" style="background-color: #ffffff;">
                    <span class="brand-text font-weight-danger text-danger" style="font-weight: 700; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);">P&BENTREPRISE</span>
                </a>
                <div class="collapse navbar-collapse order-3" id="navbarCollapse">
                    <!-- Left navbar links -->
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a href="{% url 'dash' %}" class="nav-link">Accueil</a>
                        </li>
                        {% comment %} 
                        <li class="nav-item">
                            <a href="#" class="nav-link">Contact</a>
                        </li> 
                        {% endcomment %}
                        <li class="nav-item dropdown">
                            <a id="dropdownSubMenu1" href="#" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="nav-link dropdown-toggle">Dropdown</a>
                            <ul aria-labelledby="dropdownSubMenu1" class="dropdown-menu border-0 shadow">
                                <li><a href="#" class="dropdown-item">Some action </a></li>
                                <li><a href="#" class="dropdown-item">Some other action</a></li>

                                <li class="dropdown-divider"></li>

                                <!-- Level two dropdown-->
                                <li class="dropdown-submenu dropdown-hover">
                                    <a id="dropdownSubMenu2" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-item dropdown-toggle">Hover for action</a>
                                    <ul aria-labelledby="dropdownSubMenu2" class="dropdown-menu border-0 shadow">
                                        <li>
                                            <a tabindex="-1" href="#" class="dropdown-item">level 2</a>
                                        </li>

                                        <li class="dropdown-submenu">
                                            <a id="dropdownSubMenu3" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-item dropdown-toggle">level 2</a>
                                            <ul aria-labelledby="dropdownSubMenu3" class="dropdown-menu border-0 shadow">
                                                <li><a href="#" class="dropdown-item">3rd level</a></li>
                                                <li><a href="#" class="dropdown-item">3rd level</a></li>
                                            </ul>
                                        </li>

                                        <li><a href="#" class="dropdown-item">level 2</a></li>
                                        <li><a href="#" class="dropdown-item">level 2</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <!-- Right navbar links -->
                <ul class="order-1 order-md-3 navbar-nav navbar-no-expand ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#">
                            <i class="fa fa-user-circle" style="font-size:20px"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- /.navbar -->

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0 text-dark fs-10"><small style="font-weight:700; color:rgb(3, 92, 159)">Bilan du {{dates}}</small></h1>
                        </div>
                        <div class="col-sm-6">
                            <div class="row">
                                <div class="col-lg-12">
                                    <ol class="breadcrumb float-sm-right">
                                        <div class="row">
                                            <a class="nav-link" data-toggle="dropdown" href="#" style="font-size: 18px; color: #06497C; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); font-weight: 700;">filtre
                                                  <i style="font-size: 20px; color: #06497C; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);" class="fa fa-calendar"></i>
                                            </a>
                                            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right col-md-12" style="font-size: 20px; color: #06497C; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); ">
                                                <form class="col-md-12" method="get">
                                                    {% csrf_token %}
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <label>Debut </label> {{ form.date_debut }}
                                                        </div>
                                                        <div class="col-md-12">
                                                            <label>Fin</label> {{ form.date_fin }}
                                                        </div>
                                                        <div class="col-md-12 text-center p-2">
                                                            <button class="btn btn-primary" type="submit">Valider</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="" style="border-radius:20px">
                                        <div id="" class="">
                                            <div class="row p-0 m-0">
                                                <div class="col-md-12 p-0">
                                                    <div class="card" style="box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);backdrop-filter: blur(5.2px);-webkit-backdrop-filter: blur(5.2px);">
                                                        <div class="card-header">
                                                            <h3 class="card-title">
                                                                <button type="button" class="btn btn-default" id="printButton">PDF <i class='fa fa-file-pdf-o'></i></button>
                                                                <button type="button" class="btn btn-default">CSV <i class='fa fa-files-o'></i></button>
                                                                <button type="button" class="btn btn-default">Excell <i class='fa fa-file-excel-o'></i></button>
                                                            </h3>

                                                            <div class="card-tools">
                                                                <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i></button>
                                                            </div>
                                                        </div>
                                                        <!-- /.card-header -->
                                                        <div class="card-body">
                                                            <table>
                                                                <thead>
                                                                    <tr>
                                                                        <th colspan="12" style="color: rgb(3, 92, 159)">Période du : 01/01/24 au 31/12/24</th>
                                                                    </tr>
                                                                </thead>
                                                                <thead>
                                                                    <tr>
                                                                        <th colspan="2" style="color: rgb(3, 92, 159)">Section & intitulé</th>
                                                                        <th colspan="2" style="color: rgb(3, 92, 159)">Mouvements</th>
                                                                        <th colspan="2" style="color: rgb(3, 92, 159)">Tenue de compte : FCFA</th>
                                                                    </tr>
                                                                </thead>
                                                                <thead>
                                                                    <tr class="text-primary">
                                                                        <th>Section</th>
                                                                        <th>Intitulé de section</th>
                                                                        <th>Débit</th>
                                                                        <th>Crédit</th>
                                                                        <th>Soldes</th>
                                                                        <th>Exercice précédent</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr>
                                                                        <td>C-681810</td>
                                                                        <td>C-Arrondi salaire</td>
                                                                        <td></td>
                                                                        <td>C-37,980</td>
                                                                        <td>C--37,860</td>
                                                                        <td></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>684300</td>
                                                                        <td>INDEMNITE DE TRANSPORT</td>
                                                                        <td>1,230,000</td>
                                                                        <td></td>
                                                                        <td>1,230,000</td>
                                                                        <td></td>
                                                                    </tr>
                                                                    <!-- Continue adding rows similarly -->
                                                                </tbody>
                                                                <tfoot>
                                                                    <tr style="font-weight:700;color: rgb(3, 92, 159)">
                                                                        <td colspan="2">A reporter</td>
                                                                        <td>95,082,020</td>
                                                                        <td>89,719,940</td>
                                                                        <td>200000</td>
                                                                        <td></td>
                                                                    </tr>
                                                                </tfoot>
                                                            </table>
                                                        </div>
                                                        <!-- /.card-body -->
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.content-wrapper -->

        <!-- Control Sidebar -->
        <aside class="control-sidebar " style="border-radius: 4px; max-height: 100px; background: rgba(255, 255, 255, 0.22); border-radius: 16px;box-shadow: 0 5px 5px rgba(0, 0, 0, 0.1); backdrop-filter: blur(12.5px); -webkit-backdrop-filter: blur(12.5px);
                                        border: 1px solid rgba(255, 255, 255, 0.03); ">
            <div class="p-3 text-center header ">
                {% if user.is_authenticated %}
                <p><i class="fa fa-key "></i> <a href="{% url 'change_password' %}">Profil & mot de passe</a></p>
                {% endif %}
                <p><i class="fa fa-sign-out text-danger "></i> <a href="{% url 'log_out' %} "> Deconnexion</a></p>
            </div>
        </aside>
        <!-- /.control-sidebar -->

        <footer class="main-footer">
            <strong>Copyright &copy; 2023 <a href="#">P&BENTREPRISE</a>.</strong> All rights reserved.
            <div class="float-right d-none d-sm-inline-block">
                <b>Version</b> 3.0.2 <small>By Atsin</small>
            </div>
        </footer>
    </div>

    <script>
        function updateTable(month, year) {
        const url = `?month=${month}&year=${year}`;
        fetch(url)
            .then(response => response.text())
            .then(html => {
                // Extraire seulement le tableau du HTML retourné
                const parser = new DOMParser();
                const newDoc = parser.parseFromString(html, 'text/html');
                const newTable = newDoc.querySelector('table'); // Remplace uniquement le tableau
                const oldTable = document.querySelector('table');

                if (newTable && oldTable) {
                    oldTable.innerHTML = newTable.innerHTML; // Mise à jour des données
                }
            })
            .catch(err => console.error('Error updating table:', err));
    }

    function changeMonth(offset) {
        let month = parseInt(document.getElementById('month').value);
        let year = parseInt(document.getElementById('year').value);

        month += offset;
        if (month > 12) {
            month = 1;
            year++;
        } else if (month < 1) {
            month = 12;
            year--;
        }

        // Mettre à jour les sélections
        document.getElementById('month').value = month;
        document.getElementById('year').value = year;

        // Mettre à jour le tableau
        updateTable(month, year);
    }

    function selectMonthYear() {
        const month = document.getElementById('month').value;
        const year = document.getElementById('year').value;
        updateTable(month, year);
    }
    </script>

    <script src="{% static 'pb/plugins/jquery/jquery.min.js' %} "></script>
    <!-- Bootstrap 4 -->
    <script src="{% static 'pb/plugins/bootstrap/js/bootstrap.bundle.min.js' %} "></script>
    <!-- AdminLTE App -->
    <script src="{% static 'pb/dists/js/adminlte.min.js' %} "></script>
    <!-- AdminLTE for demo purposes -->
    {% comment %}
    <script src="{% static 'pb/dists/js/demo.js' %} "></script> {% endcomment %}


    <!-- jsGrid -->
    <script src="{% static 'pb/plugins/jsgrid/demos/db.js' %} "></script>

    <script src="{% static 'pb/plugins/jsgrid/jsgrid.min.js' %} "></script>
    <script src="{% static 'pb/vendows/js/buttons.html5.min.js' %} "></script>

    <!-- DataTables -->
    <script src="{% static 'pb/plugins/datatables/jquery.dataTables.js' %} "></script>
    <script src="{% static 'pb/plugins/datatables-bs4/js/dataTables.bootstrap4.js' %} "></script>
    <!-- page script -->
    <script>
        $(function() {
            $("#example1").DataTable();
            $('#example2').DataTable({
                "paging ": true,
                "lengthChange ": false,
                "searching ": false,
                "ordering ": true,
                "info ": true,
                "autoWidth ": false,
            });
        });
    </script>

    <!-- SweetAlert2 -->
    <script src="{% static 'pb/plugins/sweetalert2/sweetalert2.min.js' %} "></script>
    <!-- Toastr -->
    <script src="{% static 'pb/plugins/toastr/toastr.min.js' %} "></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var myModal = new bootstrap.Modal(document.getElementById('modal-default'));
            myModal.show();

            setTimeout(function() {
                myModal.hide();
            }, 4000);
        });
    </script>
</body>

</html>

</html>

{% endif %}